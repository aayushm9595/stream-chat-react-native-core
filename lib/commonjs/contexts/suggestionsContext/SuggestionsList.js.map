{"version":3,"sources":["SuggestionsList.tsx"],"names":["Container","styled","View","length","theme","Math","min","messageInput","suggestions","container","itemHeight","maxHeight","css","Separator","separator","SuggestionsItem","TouchableOpacity","item","Title","Text","title","Wrapper","wrapper","SuggestionsHeader","isString","component","SuggestionsList","props","active","backdropHeight","Component","componentType","handleDismiss","marginLeft","data","onSelect","suggestionsTitle","width","renderItem","React","cloneElement","height","index","name","id"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { FlatList, GestureResponderEvent } from 'react-native';\n\nimport {\n  isSuggestionUser,\n  Suggestion,\n  SuggestionComponentType,\n  Suggestions,\n} from './SuggestionsContext';\n\nimport { CommandsItem } from '../../components/AutoCompleteInput/CommandsItem';\nimport { MentionsItem } from '../../components/AutoCompleteInput/MentionsItem';\nimport { styled } from '../../styles/styledComponents';\n\nimport type {\n  DefaultCommandType,\n  DefaultUserType,\n  UnknownType,\n} from '../../types/types';\n\nconst Container = styled.View<{ length: number }>`\n  background-color: white;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  bottom: 10px;\n  height: ${({ length, theme }) =>\n    Math.min(\n      length * theme.messageInput.suggestions.container.itemHeight,\n      theme.messageInput.suggestions.container.maxHeight,\n    )}px;\n  position: absolute;\n  shadow-color: #000;\n  shadow-offset: 0px -3px;\n  shadow-opacity: 0.05;\n  z-index: 100;\n  ${({ theme }) => theme.messageInput.suggestions.container.css};\n`;\n\nconst Separator = styled.View`\n  height: 0px;\n  ${({ theme }) => theme.messageInput.suggestions.separator.css};\n`;\n\nconst SuggestionsItem = styled.TouchableOpacity`\n  height: ${({ theme }) =>\n    theme.messageInput.suggestions.container.itemHeight}px;\n  justify-content: center;\n  ${({ theme }) => theme.messageInput.suggestions.item.css};\n`;\n\nconst Title = styled.Text`\n  font-weight: bold;\n  height: ${({ theme }) =>\n    theme.messageInput.suggestions.container.itemHeight}px;\n  padding: 10px;\n  ${({ theme }) => theme.messageInput.suggestions.title.css};\n`;\n\nconst Wrapper = styled.TouchableOpacity`\n  position: absolute;\n  width: 100%;\n  z-index: 90;\n  ${({ theme }) => theme.messageInput.suggestions.wrapper.css};\n`;\n\nconst SuggestionsHeader: React.FC<{ title: string }> = ({ title }) => (\n  <Title>{title}</Title>\n);\n\nconst isString = <\n  Co extends string = DefaultCommandType,\n  Us extends UnknownType = DefaultUserType\n>(\n  component: SuggestionComponentType<Co, Us>,\n): component is string => typeof component === 'string';\n\nexport type SuggestionsListProps<\n  Co extends string = DefaultCommandType,\n  Us extends UnknownType = DefaultUserType\n> = {\n  active: boolean;\n  backdropHeight: number | string;\n  componentType: SuggestionComponentType<Co, Us>;\n  handleDismiss: (event?: GestureResponderEvent) => void;\n  marginLeft: number;\n  suggestions: Suggestions<Co, Us>;\n  suggestionsTitle: string;\n  width: number | string;\n};\n\nexport const SuggestionsList = <\n  Co extends string = DefaultCommandType,\n  Us extends UnknownType = DefaultUserType\n>(\n  props: SuggestionsListProps<Co, Us>,\n) => {\n  const {\n    active,\n    backdropHeight,\n    componentType: Component,\n    handleDismiss,\n    marginLeft,\n    suggestions: { data, onSelect },\n    suggestionsTitle,\n    width,\n  } = props;\n\n  const renderItem = ({ item }: { item: Suggestion<Co, Us> }) => {\n    if (isString(Component)) {\n      switch (Component) {\n        case 'MentionsItem':\n          if (isSuggestionUser(item)) {\n            return (\n              <SuggestionsItem onPress={() => onSelect(item)}>\n                <MentionsItem item={item} />\n              </SuggestionsItem>\n            );\n          }\n          return null;\n        case 'CommandsItem':\n          if (!isSuggestionUser(item)) {\n            return (\n              <SuggestionsItem onPress={() => onSelect(item)}>\n                <CommandsItem item={item} />\n              </SuggestionsItem>\n            );\n          }\n          return null;\n        default:\n          return null;\n      }\n    }\n\n    return (\n      <SuggestionsItem onPress={() => onSelect(item)}>\n        {React.cloneElement(Component, { item })}\n      </SuggestionsItem>\n    );\n  };\n\n  if (!active || data.length === 0) return null;\n\n  return (\n    <Wrapper onPress={handleDismiss} style={{ height: backdropHeight }}>\n      <Container length={data.length + 1} style={{ marginLeft, width }}>\n        <FlatList\n          data={data}\n          ItemSeparatorComponent={Separator}\n          keyboardShouldPersistTaps='always'\n          keyExtractor={(item, index) =>\n            `${item.name || (isSuggestionUser(item) ? item.id : '')}${index}`\n          }\n          ListHeaderComponent={<SuggestionsHeader title={suggestionsTitle} />}\n          renderItem={renderItem}\n        />\n      </Container>\n    </Wrapper>\n  );\n};\n"]}