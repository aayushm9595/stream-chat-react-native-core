{"version":3,"sources":["Card.tsx"],"names":["giphyLogo","require","Container","styled","TouchableOpacity","theme","colors","light","alignment","message","card","container","css","CardCover","Image","cover","CardFooter","View","footer","FooterDescription","Text","description","FooterLink","link","FooterLogo","logo","FooterTitle","title","trimUrl","url","replace","split","goToURL","Linking","canOpenURL","then","supported","openURL","console","log","Card","props","Cover","Footer","Header","image_url","og_scrape_url","text","thumb_url","title_link","type","additionalTouchableProps","onLongPress","uri","backgroundColor"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,IAAMA,SAA6B,GAAGC,OAAO,mDAA7C;;AAEA,IAAMC,SAAS,GAAGC,yBAAOC,gBAAV,oBACO;AAAA,MAAGC,KAAH,QAAGA,KAAH;AAAA,SAAeA,KAAK,CAACC,MAAN,CAAaC,KAA5B;AAAA,CADP,EAEgB;AAAA,MAAGC,SAAH,SAAGA,SAAH;AAAA,SAC3BA,SAAS,KAAK,OAAd,GAAwB,EAAxB,GAA6B,CADF;AAAA,CAFhB,EAIiB;AAAA,MAAGA,SAAH,SAAGA,SAAH;AAAA,SAC5BA,SAAS,KAAK,MAAd,GAAuB,EAAvB,GAA4B,CADA;AAAA,CAJjB,EAUX;AAAA,MAAGH,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmBC,SAAnB,CAA6BC,GAA5C;AAAA,CAVW,CAAf;;AAaA,IAAMC,SAAS,GAAGV,yBAAOW,KAAV,qBAEX;AAAA,MAAGT,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmBK,KAAnB,CAAyBH,GAAxC;AAAA,CAFW,CAAf;;AAKA,IAAMI,UAAU,GAAGb,yBAAOc,IAAV,qBAIZ;AAAA,MAAGZ,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmBQ,MAAnB,CAA0BN,GAAzC;AAAA,CAJY,CAAhB;;AAOA,IAAMO,iBAAiB,GAAGhB,yBAAOiB,IAAV,qBACnB;AAAA,MAAGf,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmBQ,MAAnB,CAA0BG,WAA1B,CAAsCT,GAArD;AAAA,CADmB,CAAvB;;AAIA,IAAMU,UAAU,GAAGnB,yBAAOiB,IAAV,qBACZ;AAAA,MAAGf,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmBQ,MAAnB,CAA0BK,IAA1B,CAA+BX,GAA9C;AAAA,CADY,CAAhB;;AAIA,IAAMY,UAAU,GAAGrB,yBAAOW,KAAV,qBACZ;AAAA,MAAGT,KAAH,SAAGA,KAAH;AAAA,SAAeA,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmBQ,MAAnB,CAA0BO,IAA1B,CAA+Bb,GAA9C;AAAA,CADY,CAAhB;;AAIA,IAAMc,WAAW,GAAGvB,yBAAOiB,IAAV,qBACb;AAAA,MAAGf,KAAH,UAAGA,KAAH;AAAA,SAAeA,KAAK,CAACI,OAAN,CAAcC,IAAd,CAAmBQ,MAAnB,CAA0BS,KAA1B,CAAgCf,GAA/C;AAAA,CADa,CAAjB;;AAIA,IAAMgB,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD;AAAA,SACdA,GAAG,IAAIA,GAAG,CAACC,OAAJ,CAAY,8BAAZ,EAA4C,EAA5C,EAAgDC,KAAhD,CAAsD,GAAtD,EAA2D,CAA3D,CADO;AAAA,CAAhB;;AAGA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACH,GAAD,EAAkB;AAChC,MAAI,CAACA,GAAL,EAAU;;AACVI,uBAAQC,UAAR,CAAmBL,GAAnB,EAAwBM,IAAxB,CAA6B,UAACC,SAAD,EAAe;AAC1C,QAAIA,SAAJ,EAAe;AACbH,2BAAQI,OAAR,CAAgBR,GAAhB;AACD,KAFD,MAEO;AACLS,MAAAA,OAAO,CAACC,GAAR,kCAA2CV,GAA3C;AACD;AACF,GAND;AAOD,CATD;;AAwCO,IAAMW,IAAI,GAAG,SAAPA,IAAO,CAClBC,KADkB,EAEf;AAAA,MAEDjC,SAFC,GAaCiC,KAbD,CAEDjC,SAFC;AAAA,MAGDkC,KAHC,GAaCD,KAbD,CAGDC,KAHC;AAAA,MAIDC,MAJC,GAaCF,KAbD,CAIDE,MAJC;AAAA,MAKDC,MALC,GAaCH,KAbD,CAKDG,MALC;AAAA,MAMDC,SANC,GAaCJ,KAbD,CAMDI,SANC;AAAA,MAODC,aAPC,GAaCL,KAbD,CAODK,aAPC;AAAA,MAQDC,IARC,GAaCN,KAbD,CAQDM,IARC;AAAA,MASDC,SATC,GAaCP,KAbD,CASDO,SATC;AAAA,MAUDrB,KAVC,GAaCc,KAbD,CAUDd,KAVC;AAAA,MAWDsB,UAXC,GAaCR,KAbD,CAWDQ,UAXC;AAAA,MAYDC,IAZC,GAaCT,KAbD,CAYDS,IAZC;;AAAA,8BAe+C,sDAf/C;AAAA,MAeKC,wBAfL,yBAeKA,wBAfL;AAAA,MAe+BC,WAf/B,yBAe+BA,WAf/B;;AAiBH,MAAMC,GAAG,GAAGR,SAAS,IAAIG,SAAzB;AAEA,SACE,gCAAC,SAAD;AACE,IAAA,SAAS,EAAExC,SADb;AAEE,IAAA,WAAW,EAAE4C,WAFf;AAGE,IAAA,OAAO,EAAE;AAAA,aAAMpB,OAAO,CAACc,aAAa,IAAID,SAAjB,IAA8BG,SAA/B,CAAb;AAAA,KAHX;AAIE,IAAA,MAAM,EAAC;AAJT,KAKMG,wBALN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOGP,MAAM,IAAI,gCAAC,MAAD,gCAAYH,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAPb,EAQGC,KAAK,IAAI,gCAAC,KAAD,gCAAWD,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KARZ,EASGY,GAAG,IAAI,CAACX,KAAR,IACC,gCAAC,SAAD;AACE,IAAA,UAAU,EAAC,OADb;AAEE,IAAA,MAAM,EAAE;AAAEW,MAAAA,GAAG,EAAE,mCAAuBA,GAAvB;AAAP,KAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVJ,EAeGV,MAAM,GACL,gCAAC,MAAD,gCAAYF,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADK,GAGL,gCAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,gCAAC,iBAAD;AAAM,IAAA,KAAK,EAAE;AAAEa,MAAAA,eAAe,EAAE;AAAnB,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG3B,KAAK,IAAI,gCAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAcA,KAAd,CADZ,EAEGoB,IAAI,IAAI,gCAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoBA,IAApB,CAFX,EAGE,gCAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAanB,OAAO,CAACqB,UAAU,IAAIH,aAAf,CAApB,CAHF,CADF,EAMGI,IAAI,KAAK,OAAT,IAAoB,gCAAC,UAAD;AAAY,IAAA,MAAM,EAAElD,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANvB,CAlBJ,CADF;AA8BD,CAnDM","sourcesContent":["import React from 'react';\nimport { ImageRequireSource, Linking, View } from 'react-native';\n\nimport { useMessageContentContext } from '../../contexts/messageContentContext/MessageContentContext';\nimport { styled } from '../../styles/styledComponents';\nimport { makeImageCompatibleUrl } from '../../utils/utils';\n\nimport type { Attachment } from 'stream-chat';\n\nimport type { Alignment } from '../../contexts/messagesContext/MessagesContext';\nimport type { DefaultAttachmentType, UnknownType } from '../../types/types';\n\nconst giphyLogo: ImageRequireSource = require('../../assets/Poweredby_100px-White_VertText.png');\n\nconst Container = styled.TouchableOpacity<{ alignment: Alignment }>`\n  background-color: ${({ theme }) => theme.colors.light};\n  border-bottom-left-radius: ${({ alignment }) =>\n    alignment === 'right' ? 16 : 2}px;\n  border-bottom-right-radius: ${({ alignment }) =>\n    alignment === 'left' ? 16 : 2}px;\n  border-top-left-radius: 16px;\n  border-top-right-radius: 16px;\n  overflow: hidden;\n  width: 250px;\n  ${({ theme }) => theme.message.card.container.css}\n`;\n\nconst CardCover = styled.Image`\n  height: 150px;\n  ${({ theme }) => theme.message.card.cover.css}\n`;\n\nconst CardFooter = styled.View`\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 10px;\n  ${({ theme }) => theme.message.card.footer.css}\n`;\n\nconst FooterDescription = styled.Text`\n  ${({ theme }) => theme.message.card.footer.description.css}\n`;\n\nconst FooterLink = styled.Text`\n  ${({ theme }) => theme.message.card.footer.link.css}\n`;\n\nconst FooterLogo = styled.Image`\n  ${({ theme }) => theme.message.card.footer.logo.css}\n`;\n\nconst FooterTitle = styled.Text`\n  ${({ theme }) => theme.message.card.footer.title.css}\n`;\n\nconst trimUrl = (url?: string) =>\n  url && url.replace(/^(?:https?:\\/\\/)?(?:www\\.)?/i, '').split('/')[0];\n\nconst goToURL = (url?: string) => {\n  if (!url) return;\n  Linking.canOpenURL(url).then((supported) => {\n    if (supported) {\n      Linking.openURL(url);\n    } else {\n      console.log(`Don't know how to open URI: ${url}`);\n    }\n  });\n};\n\nexport type CardProps<\n  At extends UnknownType = DefaultAttachmentType\n> = Attachment<At> & {\n  /**\n   * Position of the message, either 'right' or 'left'\n   */\n  alignment: Alignment;\n  /**\n   * Custom UI component to override default cover (between Header and Footer) of Card component.\n   * Accepts the same props as Card component.\n   */\n  Cover?: React.ComponentType<CardProps<At>>;\n  /**\n   * Custom UI component to override default Footer of Card component.\n   * Accepts the same props as Card component.\n   */\n  Footer?: React.ComponentType<CardProps<At>>;\n  /**\n   * Custom UI component to override default header of Card component.\n   * Accepts the same props as Card component.\n   */\n  Header?: React.ComponentType<CardProps<At>>;\n};\n\n/**\n * UI component for card in attachments.\n *\n * @example ./Card.md\n */\nexport const Card = <At extends UnknownType = DefaultAttachmentType>(\n  props: CardProps<At>,\n) => {\n  const {\n    alignment,\n    Cover,\n    Footer,\n    Header,\n    image_url,\n    og_scrape_url,\n    text,\n    thumb_url,\n    title,\n    title_link,\n    type,\n  } = props;\n\n  const { additionalTouchableProps, onLongPress } = useMessageContentContext();\n\n  const uri = image_url || thumb_url;\n\n  return (\n    <Container\n      alignment={alignment}\n      onLongPress={onLongPress}\n      onPress={() => goToURL(og_scrape_url || image_url || thumb_url)}\n      testID='card-attachment'\n      {...additionalTouchableProps}\n    >\n      {Header && <Header {...props} />}\n      {Cover && <Cover {...props} />}\n      {uri && !Cover && (\n        <CardCover\n          resizeMode='cover'\n          source={{ uri: makeImageCompatibleUrl(uri) }}\n        />\n      )}\n      {Footer ? (\n        <Footer {...props} />\n      ) : (\n        <CardFooter>\n          <View style={{ backgroundColor: 'transparent' }}>\n            {title && <FooterTitle>{title}</FooterTitle>}\n            {text && <FooterDescription>{text}</FooterDescription>}\n            <FooterLink>{trimUrl(title_link || og_scrape_url)}</FooterLink>\n          </View>\n          {type === 'giphy' && <FooterLogo source={giphyLogo} />}\n        </CardFooter>\n      )}\n    </Container>\n  );\n};\n"]}